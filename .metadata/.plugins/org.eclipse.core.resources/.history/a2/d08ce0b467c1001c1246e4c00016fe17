import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.*;
public class depositMoney {
	static Scanner scanner = new Scanner(System.in);
	public static void main(String[] args) throws FileNotFoundException
	{
		
		File file = new File("update.txt");
		try {
			if(file.createNewFile())
			{
				System.out.println("File created Successfully");
			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		String userName;
		int balance;
		HashMap<String,Integer> userDetails = new HashMap<String,Integer>();
		System.out.println("Enter UserName");
		userName = scanner.nextLine();
		System.out.println("Enter balance");
		balance = scanner.nextInt();
		userDetails.put(userName, balance);
		Scanner fileContent = new Scanner(file);
		while(fileContent.hasNextLine())
		{
			String data = fileContent.nextLine();
			if(data.equals(userDetails))
			{
				deposit(userDetails,userName);
			}
			else
			{
				try {
                    BufferedWriter writer = new BufferedWriter(new FileWriter("Registeration.txt", true)); 
                    writer.write(userDetails+"\n");
                    writer.close();
                }
                catch (IOException e) {
                    System.out.println("exception occoured" + e);
                }
			}
		}
	}

	private static void deposit(HashMap<String, Integer> userDetails, String userName) {
		// TODO Auto-generated method stub
		int balance = userDetails.get(userName);
		int amount;
		System.out.println("Enter Amount to be deposited");
		amount = scanner.nextInt();
		if(amount<balance)
		{
			userDetails.put(userName,userDetails.get(userName)+amount);
			System.out.println(userDetails);
		}
		else
		{
			System.out.println("Insufficient");
		}
	}
}
